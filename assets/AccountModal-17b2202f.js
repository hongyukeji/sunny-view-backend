var $=Object.defineProperty,b=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))y.call(t,o)&&B(e,o,t[o]);if(g)for(var o of g(t))L.call(t,o)&&B(e,o,t[o]);return e},h=(e,t)=>b(e,k(t));var f=(e,t,o)=>new Promise((a,n)=>{var c=s=>{try{r(o.next(s))}catch(p){n(p)}},m=s=>{try{r(o.throw(s))}catch(p){n(p)}},r=s=>s.done?a(s.value):Promise.resolve(s.value).then(c,m);r((o=o.apply(e,t)).next())});import{B as P,a as R}from"./index-567227c5.js";import{B as S}from"./BasicForm-7e3a59df.js";import"./componentMap-8c5d2fac.js";import{u as A}from"./useForm-eae86464.js";import"./RadioButtonGroup-63152489.js";import{a as O}from"./account.data-f84b704f.js";import{a as U}from"./system-20e0f1d7.js";import{d as D,f as M,c as I,u as l,a7 as _,Z as T,a8 as V,a9 as G,l as N,ac as W}from"./vue-ea98dac5.js";import{_ as Z}from"./index.js";import"./antd-168c158e.js";import"./useWindowSizeFn-9a9a25b4.js";import"./FormItem.vue_vue_type_script_lang-60e73ebf.js";import"./isNumber-6e063d5c.js";import"./isBoolean-e59585aa.js";import"./get-921f7259.js";import"./uniqBy-989d5baf.js";import"./useFormItem-1ece48e0.js";import"./uuid-31b8b5a4.js";import"./useSortable-3cb9ef53.js";import"./download-4dc1f19b.js";import"./base64Conver-39fc0d26.js";import"./index-3f191529.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-96857a86.js";import"./copyTextToClipboard-38cd3bdb.js";import"./index-1608b1f9.js";const j=D({name:"AccountModal",components:{BasicModal:P,BasicForm:S},emits:["success","register"],setup(e,{emit:t}){const o=M(!0),a=M(""),[n,{setFieldsValue:c,updateSchema:m,resetFields:r,validate:s}]=A({labelWidth:100,baseColProps:{span:24},schemas:O,showActionButtonGroup:!1,actionColOptions:{span:23}}),[p,{setModalProps:d,closeModal:F}]=R(i=>f(this,null,function*(){r(),d({confirmLoading:!1}),o.value=!!(i!=null&&i.isUpdate),l(o)&&(a.value=i.record.id,c(u({},i.record)));const C=yield U();m([{field:"pwd",show:!l(o)},{field:"dept",componentProps:{treeData:C}}])})),v=I(()=>l(o)?"编辑账号":"新增账号");function w(){return f(this,null,function*(){try{const i=yield s();d({confirmLoading:!0}),F(),t("success",{isUpdate:l(o),values:h(u({},i),{id:a.value})})}finally{d({confirmLoading:!1})}})}return{registerModal:p,registerForm:n,getTitle:v,handleSubmit:w}}});function q(e,t,o,a,n,c){const m=_("BasicForm"),r=_("BasicModal");return T(),V(r,W(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:G(()=>[N(m,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const Mo=Z(j,[["render",q]]);export{Mo as default};
