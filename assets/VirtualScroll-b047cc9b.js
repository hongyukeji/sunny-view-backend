import{N as A,z as D,_ as C,w as I}from"./index.js";import{d as V,f as B,r as M,c,u as i,w as k,o as P,x as L,l as o,a7 as S,Z as q,a8 as z,a9 as _,E,$ as g,a0 as W}from"./vue-ea98dac5.js";import{P as U}from"./index-46052efd.js";import{E as Z}from"./antd-168c158e.js";import"./useContentViewHeight-6fc1b870.js";import"./useWindowSizeFn-9a9a25b4.js";import"./onMountedOrActivated-3eb95ecd.js";import"./isNumber-6e063d5c.js";const j={height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String],bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},w="virtual-scroll";function a(t,s="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${s}`}const G=V({name:"VirtualScroll",props:j,setup(t,{slots:s}){const u=B(null),r=M({first:0,last:0,scrollTop:0}),p=c(()=>parseInt(t.bench,10)),d=c(()=>parseInt(t.itemHeight,10)),m=c(()=>Math.max(0,r.first-i(p))),f=c(()=>Math.min((t.items||[]).length,r.last+i(p))),v=c(()=>({height:a((t.items||[]).length*i(d))})),h=c(()=>{const e={},n=a(t.height),l=a(t.minHeight),H=a(t.minWidth),N=a(t.maxHeight),b=a(t.maxWidth),F=a(t.width);return n&&(e.height=n),l&&(e.minHeight=l),H&&(e.minWidth=H),N&&(e.maxHeight=N),b&&(e.maxWidth=b),F&&(e.width=F),e});k([()=>t.itemHeight,()=>t.height],()=>{y()});function x(e){const n=i(u);if(!n)return 0;const l=parseInt(t.height||0,10)||n.clientHeight;return e+Math.ceil(l/i(d))}function $(){return Math.floor(r.scrollTop/i(d))}function y(){const e=i(u);e&&(r.scrollTop=e.scrollTop,r.first=$(),r.last=x(r.first))}function R(){const{items:e=[]}=t;return e.slice(i(m),i(f)).map(T)}function T(e,n){n+=i(m);const l=a(n*i(d));return o("div",{class:`${w}__item`,style:{top:l},key:n},[D(s,"default",{index:n,item:e})])}return P(()=>{r.last=x(0),L(()=>{const e=i(u);e&&A({el:e,name:"scroll",listener:y,wait:0})})}),()=>o("div",{class:w,style:i(h),ref:u},[o("div",{class:`${w}__container`,style:i(v)},[R()])])}});const J=C(G,[["__scopeId","data-v-762bdd43"]]),K=I(J),O=(()=>{const t=[];for(let s=1;s<2e4;s++)t.push({title:"列表项"+s});return t})(),Q=V({components:{VScroll:K,Divider:Z,PageWrapper:U},setup(){return{data:O}}});const X={class:"virtual-scroll-demo-wrap"},Y={class:"virtual-scroll-demo__item"},tt={class:"virtual-scroll-demo-wrap"},et={class:"virtual-scroll-demo__item"};function it(t,s,u,r,p,d){const m=S("Divider"),f=S("VScroll"),v=S("PageWrapper");return q(),z(v,{class:"virtual-scroll-demo"},{default:_(()=>[o(m,null,{default:_(()=>[E("基础滚动示例")]),_:1}),g("div",X,[o(f,{itemHeight:41,items:t.data,height:300,width:300},{default:_(({item:h})=>[g("div",Y,W(h.title),1)]),_:1},8,["items"])]),o(m,null,{default:_(()=>[E("即使不可见，也预先加载50条数据，防止空白")]),_:1}),g("div",tt,[o(f,{itemHeight:41,items:t.data,height:300,width:300,bench:50},{default:_(({item:h})=>[g("div",et,W(h.title),1)]),_:1},8,["items"])])]),_:1})}const dt=C(Q,[["render",it],["__scopeId","data-v-777deded"]]);export{dt as default};
