var l=(o,u,s)=>new Promise((p,t)=>{var d=e=>{try{r(s.next(e))}catch(a){t(a)}},n=e=>{try{r(s.throw(e))}catch(a){t(a)}},r=e=>e.done?p(e.value):Promise.resolve(e.value).then(d,n);r((s=s.apply(o,u)).next())});import{a4 as C,m as k,b8 as B,bt as F,bs as b,_ as A}from"./index.js";import{P}from"./index-46052efd.js";import D from"./CurrentPermissionMode-26369e18.js";import{d as g,c as M,a7 as i,Z as v,a8 as S,a9 as m,l as c,$,E as _}from"./vue-ea98dac5.js";import{u as T,x as w}from"./antd-168c158e.js";import"./useContentViewHeight-6fc1b870.js";import"./useWindowSizeFn-9a9a25b4.js";import"./onMountedOrActivated-3eb95ecd.js";import"./isNumber-6e063d5c.js";const x=g({components:{Space:T,Alert:w,CurrentPermissionMode:D,PageWrapper:P},setup(){const{refreshMenu:o}=C(),u=k(),s=B(),p=M(()=>s.getProjectConfig.permissionMode===F.BACK);function t(d){return l(this,null,function*(){const n="fakeToken"+d;u.setToken(n),u.getUserInfoAction(),o()})}return{RoleEnum:b,refreshMenu:o,switchToken:t,isBackPermissionMode:p}}});const y={class:"mt-4"};function h(o,u,s,p,t,d){const n=i("CurrentPermissionMode"),r=i("Alert"),e=i("a-button"),a=i("Space"),f=i("PageWrapper");return v(),S(f,{title:"后台权限示例",contentBackground:"",contentClass:"p-4",content:"目前mock了两组数据， id为1 和 2 具体返回的菜单可以在mock/sys/menu.ts内查看"},{default:m(()=>[c(n),c(r,{class:"mt-4",type:"info",message:"点击后请查看左侧菜单变化","show-icon":""}),$("div",y,[_(" 权限切换(请先切换权限模式为后台权限模式): "),c(a,null,{default:m(()=>[c(e,{onClick:u[0]||(u[0]=E=>o.switchToken(1)),disabled:!o.isBackPermissionMode},{default:m(()=>[_(" 获取用户id为1的菜单 ")]),_:1},8,["disabled"]),c(e,{onClick:u[1]||(u[1]=E=>o.switchToken(2)),disabled:!o.isBackPermissionMode},{default:m(()=>[_(" 获取用户id为2的菜单 ")]),_:1},8,["disabled"])]),_:1})])]),_:1})}const z=A(x,[["render",h],["__scopeId","data-v-e2f0b5bb"]]);export{z as default};
